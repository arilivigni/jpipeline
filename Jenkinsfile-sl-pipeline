@Library('github.com/arilivigni/jpipeline@master') import org.centos.jpipeline.*
@Library('github.com/CentOS/cico-pipeline-library@master') import org.centos.*

properties(
        [
                buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '25', daysToKeepStr: '', numToKeepStr: '50')),
                disableConcurrentBuilds(),
                parameters(
                        [
                                string(defaultValue: 'f26', description: 'Fedora target branch', name: 'TARGET_BRANCH'),
                                string(defaultValue: 'org.centos.stage', description: 'Main topic to publish on', name: 'MAIN_TOPIC'),
                        ]
                ),
        ]
)


node {
    ansiColor('xterm') {
        timestamps {
            try {
                deleteDir()
                jCiPipeline {}
            } catch (err) {
                echo err.getMessage()
                throw err
            }
        }
    }
}